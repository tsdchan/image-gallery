(function(){"use strict";var e={124:function(e,t,n){var l=n(328),s=n(760);const o={id:"app"};function i(e,t,n,l,i,a){const r=(0,s.E1)("TheHeader"),c=(0,s.E1)("router-view");return(0,s.Wz)(),(0,s.An)("div",o,[(0,s.K2)(r),(0,s.K2)(c)])}const a={class:"container"},r=(0,s.QD)("nav",null,null,-1);function c(e,t,n,l,o,i){const c=(0,s.E1)("ThemeSwitcher");return(0,s.Wz)(),(0,s.An)("header",a,[r,(0,s.K2)(c)])}const u={class:"theme-switcher d-flex align-items-center justify-content-end gap-2 px-2"},h={class:"text-center",id:"fullscreenToggle"},d={class:"switch mb-0"},m=["checked"],b=(0,s.QD)("span",{class:"slider round"},null,-1),g=(0,s.QD)("div",{class:"label-text mt-1",style:{"font-size":"0.75rem"}},"Fullscreen",-1),f={class:"text-center"},v={class:"switch mb-0"},p=["checked"],x=(0,s.QD)("span",{class:"slider round"},null,-1),y=(0,s.QD)("div",{class:"label-text mt-1",style:{"font-size":"0.75rem"}},"Dark Mode",-1);function w(e,t,n,l,o,i){return(0,s.Wz)(),(0,s.An)("div",u,[(0,s.QD)("div",h,[(0,s.QD)("label",d,[(0,s.QD)("input",{type:"checkbox",checked:o.isFullscreen,onChange:t[0]||(t[0]=(...e)=>i.toggleFullScreen&&i.toggleFullScreen(...e)),"aria-label":"Toggle fullscreen mode"},null,40,m),b]),g]),(0,s.QD)("div",f,[(0,s.QD)("label",v,[(0,s.QD)("input",{type:"checkbox",checked:o.isDarkMode,onChange:t[1]||(t[1]=(...e)=>i.toggleTheme&&i.toggleTheme(...e)),"aria-label":"Toggle dark mode"},null,40,p),x]),y])])}var D={name:"ThemeSwitcher",data(){return{isDarkMode:!1,isFullscreen:!1}},methods:{toggleTheme(){this.isDarkMode=!this.isDarkMode,document.body.classList.toggle("dark-mode",this.isDarkMode),localStorage.setItem("theme",this.isDarkMode?"dark":"light")},toggleFullScreen(){document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():this.requestFullScreen(document.documentElement),this.isFullscreen=!document.fullscreenElement},requestFullScreen(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}},mounted(){localStorage.getItem("theme")?this.isDarkMode="dark"===localStorage.getItem("theme"):this.isDarkMode=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,this.isDarkMode&&document.body.classList.add("dark-mode")}},k=n(152);const A=(0,k.c)(D,[["render",w]]);var Q=A,T={components:{ThemeSwitcher:Q}};const E=(0,k.c)(T,[["render",c]]);var S=E,I={components:{TheHeader:S}};const _=(0,k.c)(I,[["render",i],["__scopeId","data-v-00cc35f3"]]);var P=_,z=n(216),F=n(752);const M=e=>((0,s.ED)("data-v-fe00d890"),e=e(),(0,s.ii)(),e),W={class:"container"},L=M((()=>(0,s.QD)("h1",{class:"mb-4"},"Albums",-1))),C={key:0,class:"text-center"},Y=M((()=>(0,s.QD)("div",{class:"spinner-border text-primary",role:"status"},[(0,s.QD)("span",{class:"visually-hidden"},"Loading...")],-1))),j=[Y],R={class:"row"},$={class:"card"},O={class:"card-body"},q={class:"card-title"},U={class:"card-text"};function X(e,t,n,l,o,i){const a=(0,s.E1)("router-link");return(0,s.Wz)(),(0,s.An)("div",W,[L,o.loading?((0,s.Wz)(),(0,s.An)("div",C,j)):(0,s.g1)("",!0),(0,s.QD)("div",R,[((0,s.Wz)(!0),(0,s.An)(s.ae,null,(0,s.mi)(o.albums,(e=>((0,s.Wz)(),(0,s.An)("div",{class:"col-sm-6 col-md-4 col-lg-3 mb-2",key:e.id},[(0,s.K2)(a,{to:{name:"ImageGallery",params:{path:e.path}},class:"text-decoration-none text-dark","aria-label":`Album: ${e.title}`},{default:(0,s.Ql)((()=>[(0,s.QD)("div",$,[(0,s.QD)("div",{class:"card-img-top square-image",style:(0,F.MN)({backgroundImage:"url("+e.thumbnail+")"})},null,4),(0,s.QD)("div",O,[(0,s.QD)("h5",q,(0,F.WA)(e.title),1),(0,s.QD)("p",U,(0,F.WA)(e.description),1)])])])),_:2},1032,["to","aria-label"])])))),128))])])}var K=n(774),V={name:"AlbumIndex",data(){return{albums:[],loading:!1}},mounted(){this.fetchAlbums()},methods:{isAbsolutePath(e){return/^(?:[a-z]+:)?\/\//i.test(e)},resolvePath(e){const t=window.VUE_APP_BASE_URL||"/";return this.isAbsolutePath(e)?e:`${t}${e}`},fetchAlbums(){this.loading=!0;const e=window.VUE_APP_BASE_URL||"/";K.c.get(`${e}albums.json`).then((e=>{this.albums=e.data.albums.map((e=>({...e,thumbnail:this.resolvePath(e.thumbnail),json:this.resolvePath(e.json)})))})).catch((e=>{console.error("There was an error fetching the albums:",e)})).finally((()=>{this.loading=!1}))}}};const B=(0,k.c)(V,[["render",X],["__scopeId","data-v-fe00d890"]]);var H=B;const J=e=>((0,s.ED)("data-v-7a27fb78"),e=e(),(0,s.ii)(),e),N={class:"container mt-2"},G={key:0,class:"text-center"},Z=J((()=>(0,s.QD)("div",{class:"spinner-border text-primary",role:"status"},[(0,s.QD)("span",{class:"visually-hidden"},"Loading...")],-1))),ee=[Z],te={"aria-label":"breadcrumb",class:"breadcrumb-container"},ne={class:"container-fluid"},le={class:"d-flex justify-content-between flex-wrap"},se={class:"breadcrumb mb-0 flex-grow-1"},oe={class:"breadcrumb-item"},ie={class:"breadcrumb-item active","aria-current":"page"},ae={class:"description mb-4 mt-2"},re={class:"row"},ce=["onClick"],ue={class:"card h-100"},he=["src","alt"],de={class:"lightbox-info"},me={class:"lightbox-title"},be={class:"lightbox-description"},ge={class:"thumbnail-container",ref:"thumbnailContainer"},fe=["src","onClick"];function ve(e,t,n,o,i,a){const r=(0,s.E1)("router-link");return(0,s.Wz)(),(0,s.An)("div",N,[i.loading?((0,s.Wz)(),(0,s.An)("div",G,ee)):(0,s.g1)("",!0),(0,s.QD)("nav",te,[(0,s.QD)("div",ne,[(0,s.QD)("div",le,[(0,s.QD)("ol",se,[(0,s.QD)("li",oe,[(0,s.K2)(r,{to:"/"},{default:(0,s.Ql)((()=>[(0,s.mY)("Home")])),_:1})]),(0,s.QD)("li",ie,(0,F.WA)(i.albumTitle),1)]),(0,s.QD)("button",{class:"btn btn-primary ms-3",onClick:t[0]||(t[0]=(0,l.Y7)(((...e)=>a.downloadAlbum&&a.downloadAlbum(...e)),["stop","prevent"]))},"Download Album")])])]),(0,s.QD)("div",ae,(0,F.WA)(i.albumDescription),1),(0,s.QD)("div",re,[((0,s.Wz)(!0),(0,s.An)(s.ae,null,(0,s.mi)(i.images,((e,t)=>((0,s.Wz)(),(0,s.An)("div",{key:e.id,class:"col-6 col-sm-4 col-md-3 col-lg-2 mb-4",onClick:e=>a.openLightbox(t)},[(0,s.QD)("div",ue,[(0,s.QD)("div",{class:"square-image",style:(0,F.MN)({backgroundImage:"url("+e.src+")"})},null,4)])],8,ce)))),128))]),i.lightbox.visible?((0,s.Wz)(),(0,s.An)("div",{key:1,class:"lightbox-modal",onClick:t[7]||(t[7]=(0,l.Y7)(((...e)=>a.closeLightbox&&a.closeLightbox(...e)),["self"]))},[(0,s.QD)("button",{class:"lightbox-close",onClick:t[1]||(t[1]=(0,l.Y7)(((...e)=>a.closeLightbox&&a.closeLightbox(...e)),["stop"]))},"X"),(0,s.QD)("img",{src:`${i.images[i.lightbox.currentIndex].src}`,class:"lightbox-image",alt:i.images[i.lightbox.currentIndex].title,onTouchstart:t[2]||(t[2]=(...e)=>a.handleTouchStart&&a.handleTouchStart(...e)),onTouchmove:t[3]||(t[3]=(...e)=>a.handleTouchMove&&a.handleTouchMove(...e)),onTouchend:t[4]||(t[4]=(...e)=>a.handleTouchEnd&&a.handleTouchEnd(...e))},null,40,he),(0,s.QD)("div",de,[(0,s.QD)("h3",me,(0,F.WA)(i.images[i.lightbox.currentIndex].title),1),(0,s.QD)("p",be,(0,F.WA)(i.images[i.lightbox.currentIndex].description),1)]),(0,s.QD)("button",{class:"nav-btn left",onClick:t[5]||(t[5]=(0,l.Y7)((e=>a.navigate("prev")),["stop","prevent"]))},"<"),(0,s.QD)("button",{class:"nav-btn right",onClick:t[6]||(t[6]=(0,l.Y7)((e=>a.navigate("next")),["stop","prevent"]))},">"),(0,s.QD)("div",ge,[((0,s.Wz)(!0),(0,s.An)(s.ae,null,(0,s.mi)(i.images,((e,t)=>((0,s.Wz)(),(0,s.An)("img",{key:e.id,src:`${e.src}`,class:(0,F.WN)(["thumbnail",{active:t===i.lightbox.currentIndex}]),onClick:(0,l.Y7)((e=>a.setImage(t)),["stop","prevent"]),ref_for:!0,ref:`thumb-${t}`},null,10,fe)))),128))],512)])):(0,s.g1)("",!0)])}var pe=n(771),xe=n.n(pe),ye=n(480),we={props:["path"],data(){return{images:[],loading:!1,currentAlbumFolder:"",albumTitle:"",albumDescription:"",albumJson:"",lightbox:{visible:!1,currentIndex:0,currentImage:{},touchStartX:0,touchStartY:0,touchEndX:0,touchEndY:0}}},async mounted(){this.currentAlbumFolder=this.path,await this.fetchAlbumInfo(),await this.fetchImages(),document.addEventListener("keydown",this.handleKeydown)},beforeUnmount(){document.removeEventListener("keydown",this.handleKeydown)},methods:{isAbsolutePath(e){return/^(?:[a-z]+:)?\/\//i.test(e)},resolvePath(e){const t=window.VUE_APP_BASE_URL||"/";return this.isAbsolutePath(e)?e:`${t}${e}`},async fetchAlbumInfo(){try{const e=window.VUE_APP_BASE_URL||"/",t=await K.c.get(`${e}albums.json`),n=t.data.albums.find((e=>e.path===this.path));n?(this.albumTitle=n.title,this.albumDescription=n.description,this.albumJson=n.json):console.error("Album not found.")}catch(e){console.error("There was an error fetching the albums:",e)}},async fetchImages(){try{this.loading=!0;const e=await K.c.get(this.resolvePath(this.albumJson));this.images=e.data.images.map((e=>({...e,src:this.resolvePath(e.src)})))}catch(e){console.error("There was an error fetching the images:",e)}finally{this.loading=!1}},openLightbox(e){this.lightbox.currentIndex=e,this.lightbox.visible=!0,document.body.style.overflow="hidden"},closeLightbox(){this.lightbox.visible=!1,document.body.style.overflow=""},navigate(e){const t=this.images.length;"next"===e?this.lightbox.currentIndex=(this.lightbox.currentIndex+1)%t:"prev"===e&&(this.lightbox.currentIndex=(this.lightbox.currentIndex+t-1)%t),this.$nextTick((()=>{this.ensureThumbnailVisible(this.lightbox.currentIndex)}))},setImage(e){this.lightbox.currentIndex=e,this.ensureThumbnailVisible(e)},handleKeydown(e){this.lightbox.visible&&("ArrowRight"===e.key?this.navigate("next"):"ArrowLeft"===e.key?this.navigate("prev"):"Escape"===e.key&&this.closeLightbox())},ensureThumbnailVisible(e){const t=this.$refs.thumbnailContainer,n=this.$refs[`thumb-${e}`][0];if(t&&n){const e=t.getBoundingClientRect();console.log(e);const l=n.getBoundingClientRect();(l.left<e.left||l.right>e.right)&&(t.scrollLeft+=l.left-e.left-e.width/2+l.width/2)}},handleTouchStart(e){this.lightbox.touchStartX=e.touches[0].clientX,this.lightbox.touchStartY=e.touches[0].clientY,this.lightbox.touchEndX=null,this.lightbox.touchEndY=null},handleTouchMove(e){e.preventDefault(),this.lightbox.touchEndX=e.touches[0].clientX,this.lightbox.touchEndY=e.touches[0].clientY},handleTouchEnd(){if(!this.lightbox.touchEndX||!this.lightbox.touchEndY)return;const e=this.lightbox.touchEndX-this.lightbox.touchStartX,t=this.lightbox.touchEndY-this.lightbox.touchStartY,n=Math.abs(e),l=Math.abs(t);n>l&&n>50&&(e>0?this.navigate("prev"):this.navigate("next"))},async downloadAlbum(){const e=new(xe()),t=e.folder("downloadAlbum"),n=this.images.map((e=>fetch(e.src).then((e=>(e.ok,e.blob()))).then((n=>{t.file(e.title+".jpg",n,{binary:!0})})).catch((e=>{}))));await Promise.allSettled(n),e.generateAsync({type:"blob"}).then((e=>{(0,ye.saveAs)(e,"albumTitle.zip")}))}}};const De=(0,k.c)(we,[["render",ve],["__scopeId","data-v-7a27fb78"]]);var ke=De;const Ae=[{path:"/",name:"AlbumIndex",component:H},{path:"/album/:path",name:"ImageGallery",component:ke,props:!0}],Qe=(0,z.gv)({history:(0,z.oz)(window.VUE_APP_BASE_URL),routes:Ae});var Te=Qe;(0,l.W0)(P).use(Te).mount("#app")}},t={};function n(l){var s=t[l];if(void 0!==s)return s.exports;var o=t[l]={exports:{}};return e[l].call(o.exports,o,o.exports,n),o.exports}n.m=e,function(){var e=[];n.O=function(t,l,s,o){if(!l){var i=1/0;for(u=0;u<e.length;u++){l=e[u][0],s=e[u][1],o=e[u][2];for(var a=!0,r=0;r<l.length;r++)(!1&o||i>=o)&&Object.keys(n.O).every((function(e){return n.O[e](l[r])}))?l.splice(r--,1):(a=!1,o<i&&(i=o));if(a){e.splice(u--,1);var c=s();void 0!==c&&(t=c)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[l,s,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var l in t)n.o(t,l)&&!n.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,l){var s,o,i=l[0],a=l[1],r=l[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(s in a)n.o(a,s)&&(n.m[s]=a[s]);if(r)var u=r(n)}for(t&&t(l);c<i.length;c++)o=i[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(u)},l=self["webpackChunkimage_gallery"]=self["webpackChunkimage_gallery"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=n.O(void 0,[999],(function(){return n(124)}));l=n.O(l)})();
//# sourceMappingURL=app.d77b85eb.js.map